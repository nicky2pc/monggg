{"ast":null,"code":"import{Mondalak}from'./Mondalak.ts';import{CONFIG}from'../config.ts';export class Enemy extends Mondalak{constructor(x,y){let bulletSpeed=arguments.length>2&&arguments[2]!==undefined?arguments[2]:CONFIG.BULLET_SPEED;let fireRate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:CONFIG.FIRE_RATE;let moveSpeed=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1.5;let bulletColor=arguments.length>5?arguments[5]:undefined;let spawnTime=arguments.length>6?arguments[6]:undefined;let type=arguments.length>7?arguments[7]:undefined;let characterImage=arguments.length>8?arguments[8]:undefined;super(x,y,false,bulletSpeed,fireRate,bulletColor,type,characterImage);this.targetX=void 0;this.targetY=void 0;this.moveCooldown=void 0;this.moveSpeed=void 0;this.spawnTime=void 0;this.lastUpdateTime=void 0;this.targetX=x;this.targetY=y;this.moveCooldown=Date.now()+this.getRandomCooldown();this.moveSpeed=moveSpeed;this.spawnTime=spawnTime;this.type=type;this.lastUpdateTime=performance.now();}updateAI(playerX,playerY){const dx=playerX-this.x;const dy=playerY-this.y;this.angle=Math.atan2(dy,dx);if(Date.now()>this.moveCooldown){this.targetX=this.x+(Math.random()-0.5)*400;this.targetY=this.y+(Math.random()-0.5)*400;this.moveCooldown=Date.now()+this.getRandomCooldown();this.targetX=Math.max(45,Math.min(CONFIG.CANVAS_WIDTH-45,this.targetX));this.targetY=Math.max(45,Math.min(CONFIG.CANVAS_HEIGHT-45,this.targetY));}const lerpFactor=this.moveSpeed*0.01;this.x=this.lerp(this.x,this.targetX,lerpFactor);this.y=this.lerp(this.y,this.targetY,lerpFactor);this.x=Math.max(45,Math.min(CONFIG.CANVAS_WIDTH-45,this.x));this.y=Math.max(45,Math.min(CONFIG.CANVAS_HEIGHT-45,this.y));if(Date.now()-this.lastShot>this.fireRate&&Date.now()-700>this.spawnTime){return this.shoot();}return null;}lerp(start,end,factor){const clampedFactor=Math.min(1.0,Math.max(0.0,factor));return start+(end-start)*clampedFactor;}getRandomCooldown(){return Math.floor(Math.random()*(1600-600)+600);}}","map":{"version":3,"names":["Mondalak","CONFIG","Enemy","constructor","x","y","bulletSpeed","arguments","length","undefined","BULLET_SPEED","fireRate","FIRE_RATE","moveSpeed","bulletColor","spawnTime","type","characterImage","targetX","targetY","moveCooldown","lastUpdateTime","Date","now","getRandomCooldown","performance","updateAI","playerX","playerY","dx","dy","angle","Math","atan2","random","max","min","CANVAS_WIDTH","CANVAS_HEIGHT","lerpFactor","lerp","lastShot","shoot","start","end","factor","clampedFactor","floor"],"sources":["/home/nick/Desktop/Monagaynanimas_Neynar/src/game/classes/Enemy.ts"],"sourcesContent":["import { Mondalak } from './Mondalak.ts';\nimport { CONFIG } from '../config.ts';\nimport { Bullet } from './Bullet.ts';\n\nexport class Enemy extends Mondalak {\n  targetX: number;\n  targetY: number;\n  moveCooldown: number;\n  moveSpeed: number;\n  spawnTime: number;\n  lastUpdateTime: number;\n  \n  constructor(x: number, y: number, bulletSpeed: number = CONFIG.BULLET_SPEED, fireRate: number = CONFIG.FIRE_RATE, moveSpeed: number = 1.5, bulletColor: string, spawnTime: number, type: string, characterImage: HTMLImageElement) {\n    super(x, y, false, bulletSpeed, fireRate, bulletColor, type, characterImage);\n    this.targetX = x;\n    this.targetY = y;\n    this.moveCooldown = Date.now() + this.getRandomCooldown(); \n    this.moveSpeed = moveSpeed;\n    this.spawnTime = spawnTime;\n    this.type = type;\n    this.lastUpdateTime = performance.now();\n  }\n\n  updateAI(playerX: number, playerY: number): Bullet | null {\n    const dx = playerX - this.x;\n    const dy = playerY - this.y;\n    this.angle = Math.atan2(dy, dx);\n\n    if (Date.now() > this.moveCooldown) {\n      this.targetX = this.x + (Math.random() - 0.5) * 400;\n      this.targetY = this.y + (Math.random() - 0.5) * 400;\n      this.moveCooldown = Date.now() + this.getRandomCooldown();\n\n      this.targetX = Math.max(45, Math.min(CONFIG.CANVAS_WIDTH - 45, this.targetX));\n      this.targetY = Math.max(45, Math.min(CONFIG.CANVAS_HEIGHT - 45, this.targetY));\n    }\n\n    const lerpFactor = this.moveSpeed * 0.01; \n    this.x = this.lerp(this.x, this.targetX, lerpFactor);\n    this.y = this.lerp(this.y, this.targetY, lerpFactor);\n\n    this.x = Math.max(45, Math.min(CONFIG.CANVAS_WIDTH - 45, this.x));\n    this.y = Math.max(45, Math.min(CONFIG.CANVAS_HEIGHT - 45, this.y));\n\n    if ((Date.now() - this.lastShot > this.fireRate) && (Date.now() - 700 > this.spawnTime)) {\n      return this.shoot();\n    }\n\n    return null;\n  }\n\n  private lerp(start: number, end: number, factor: number): number {\n    const clampedFactor = Math.min(1.0, Math.max(0.0, factor));\n    return start + (end - start) * clampedFactor;\n  }\n\n  private getRandomCooldown(): number {\n    return Math.floor(Math.random() * (1600 - 600) + 600);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}