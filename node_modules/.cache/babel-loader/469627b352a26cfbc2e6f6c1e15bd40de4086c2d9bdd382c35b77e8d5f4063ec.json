{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getLeaderBoard}from'../../game/utils.ts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeaderboardPopup=_ref=>{let{isOpen,onClose}=_ref;const[leaderboardData,setLeaderboardData]=useState([]);const[isLoading,setIsLoading]=useState(false);const[errorMessage,setErrorMessage]=useState(null);const userId=localStorage.getItem(\"playerId\")||\"Unknown\";const fetchLeaderboard=async()=>{setIsLoading(true);setErrorMessage(null);try{const data=await getLeaderBoard();setLeaderboardData(data);}catch(error){if(error instanceof Error){setErrorMessage(error.message);}else if(typeof error==='object'&&error!==null){const apiError=error;setErrorMessage(apiError.detail);}else{setErrorMessage(\"Unknown error\");}}finally{setIsLoading(false);}};useEffect(()=>{if(isOpen){fetchLeaderboard();}},[isOpen]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Leaderboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"transactions-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Place\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Player ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Transaction\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[leaderboardData.map((record,index)=>{var _record$tx,_record$tx2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:userId===record.id?\"You!üèÜ\":record.id.substring(0,30)+\"...\"}),/*#__PURE__*/_jsx(\"td\",{children:record.score}),/*#__PURE__*/_jsx(\"td\",{children:record.tx?/*#__PURE__*/_jsx(\"a\",{href:record.tx,target:\"_blank\",rel:\"noopener noreferrer\",children:((_record$tx=record.tx)===null||_record$tx===void 0?void 0:_record$tx.length)>60?((_record$tx2=record.tx)===null||_record$tx2===void 0?void 0:_record$tx2.substring(0,60))+\"...\":record.tx}):\"Not processed\"})]},index);}),leaderboardData.length===0&&!isLoading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:4,style:{textAlign:'center'},children:errorMessage||\"No transactions to display\"})}),isLoading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:4,style:{textAlign:'center'},children:\"Loading new transactions...\"})})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-button\",onClick:fetchLeaderboard,disabled:isLoading,children:isLoading?'Loading...':'Refresh'})]})});};export default LeaderboardPopup;","map":{"version":3,"names":["React","useState","useEffect","getLeaderBoard","jsx","_jsx","jsxs","_jsxs","LeaderboardPopup","_ref","isOpen","onClose","leaderboardData","setLeaderboardData","isLoading","setIsLoading","errorMessage","setErrorMessage","userId","localStorage","getItem","fetchLeaderboard","data","error","Error","message","apiError","detail","className","children","onClick","map","record","index","_record$tx","_record$tx2","id","substring","score","tx","href","target","rel","length","colSpan","style","textAlign","disabled"],"sources":["/home/nick/Desktop/Monagaynanimas_Neynar/src/components/LeaderboardPopup/LeaderboardPopup.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getLeaderBoard } from '../../game/utils.ts';\r\nimport { LeaderboardRecord, LeaderboardPopupProps, ApiError } from '../../types.ts';\r\n\r\nconst LeaderboardPopup: React.FC<LeaderboardPopupProps> = ({ isOpen, onClose }) => {\r\n  const [leaderboardData, setLeaderboardData] = useState<LeaderboardRecord[]>([]);\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n\r\n  const userId = localStorage.getItem(\"playerId\") || \"Unknown\";\r\n\r\n  const fetchLeaderboard = async () => {\r\n    setIsLoading(true);\r\n    setErrorMessage(null);\r\n    try {\r\n      const data = await getLeaderBoard();\r\n      setLeaderboardData(data);\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        setErrorMessage(error.message);\r\n      } else if (typeof error === 'object' && error !== null) {\r\n        const apiError = error as ApiError;\r\n        setErrorMessage(apiError.detail);\r\n      } else {\r\n        setErrorMessage(\"Unknown error\");\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchLeaderboard();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"popup-overlay\">\r\n      <div className=\"popup-content\" >\r\n        <div className=\"popup-header\">\r\n          <h2>Leaderboard</h2>\r\n        \r\n          <button className=\"close-button\" onClick={onClose}>\r\n            Close\r\n          </button>\r\n        </div>\r\n        <div className=\"table-wrapper\">\r\n          <table className=\"transactions-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Place</th>\r\n                <th>Player ID</th>\r\n                <th>Score</th>\r\n                <th>Transaction</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {leaderboardData.map((record, index) => (\r\n                <tr key={index}>\r\n                  <td>{index + 1}</td>\r\n                  <td>{userId === record.id ? \"You!üèÜ\" : record.id.substring(0, 30) + \"...\"}</td>\r\n                  <td>{record.score}</td>\r\n                  <td>\r\n                    {record.tx ? (\r\n                      <a href={record.tx} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          {record.tx?.length > 60 ? record.tx?.substring(0, 60) + \"...\" : record.tx}\r\n                          </a>\r\n                    ) : (\r\n                      \"Not processed\"\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {leaderboardData.length === 0 && !isLoading && (\r\n                <tr>\r\n                  <td colSpan={4} style={{ textAlign: 'center' }}>\r\n                    {errorMessage || \"No transactions to display\"}\r\n                  </td>\r\n                </tr>\r\n              )}\r\n              {isLoading && (\r\n                <tr>\r\n                  <td colSpan={4} style={{ textAlign: 'center' }}>\r\n                    Loading new transactions...\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <button className=\"refresh-button\" onClick={fetchLeaderboard} disabled={isLoading}>\r\n            {isLoading ? 'Loading...' : 'Refresh'}\r\n          </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaderboardPopup; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}