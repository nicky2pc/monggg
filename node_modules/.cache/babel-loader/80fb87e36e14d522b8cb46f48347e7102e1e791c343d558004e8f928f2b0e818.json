{"ast":null,"code":"import{v4 as uuidv4}from'uuid';export const getOrCreatePlayerId=()=>{let id=localStorage.getItem('playerId');if(!id){id=uuidv4();localStorage.setItem('playerId',id);}return id;};export const playSound=(src,isSoundOn,audioPool)=>{if(!isSoundOn)return audioPool;const audio=new Audio(src);audio.volume=0.05;audioPool.push(audio);audio.play();audio.onended=()=>{audioPool=audioPool.filter(a=>a!==audio);};return audioPool;};export const playRandomSound=(sounds,category,isSoundOn,audioPool)=>{if(!isSoundOn||!sounds||!sounds[category]||sounds[category].length===0)return audioPool;const randomIndex=Math.floor(Math.random()*sounds[category].length);const audio=sounds[category][randomIndex];audio.volume=0.3;audioPool.push(audio);audio.play();audio.onended=()=>{audioPool=audioPool.filter(a=>a!==audio);};return audioPool;};export const loadSounds=async()=>{const soundLibrary={kill:[],death:[],hit:[],shoot:[]};for(let i=1;i<=9;i++){soundLibrary.kill.push(new Audio(`/sound/kill/kill${i}.mp3`));}for(let i=1;i<=7;i++){soundLibrary.death.push(new Audio(`/sound/death/death${i}.mp3`));}for(let i=1;i<=2;i++){soundLibrary.hit.push(new Audio(`/sound/hit/hit${i}.mp3`));}soundLibrary.shoot.push(new Audio(`/sound/shoot/shooooot.mp3`));soundLibrary.shoot.push(new Audio(`/sound/shoot/shooooot1.mp3`));soundLibrary.shoot.push(new Audio(`/sound/shoot/heal.mp3`));return soundLibrary;};export const sendTransaction=async function(score){let isDead=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{const playerId=getOrCreatePlayerId();const reqData={id:playerId,score:`${score}`,isDead:isDead};const response=await fetch(\"https://gameapi.monadassistant.xyz/set_score\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(reqData)});if(!response.ok){throw new Error(`Err: ${response.statusText}`);}const data=await response.json();return data;}catch(error){console.error(\"Err:\",error);}};export const mint=async()=>{try{const playerId=getOrCreatePlayerId();const reqData={id:playerId};const response=await fetch(\"https://gameapi.monadassistant.xyz/mint\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(reqData)});if(!response.ok){throw new Error(`Error mint: ${response.statusText}`);}const data=await response.json();return data;}catch(error){console.error(\"Err:\",error);}};export const getLeaderBoard=async()=>{const response=await fetch(\"https://gameapi.monadassistant.xyz/get_top_10_scores\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});if(!response.ok){throw new Error(`Error getting leaderboard: ${response.statusText}`);}const data=await response.json();return data;};","map":{"version":3,"names":["v4","uuidv4","getOrCreatePlayerId","id","localStorage","getItem","setItem","playSound","src","isSoundOn","audioPool","audio","Audio","volume","push","play","onended","filter","a","playRandomSound","sounds","category","length","randomIndex","Math","floor","random","loadSounds","soundLibrary","kill","death","hit","shoot","i","sendTransaction","score","isDead","arguments","undefined","playerId","reqData","response","fetch","method","headers","body","JSON","stringify","ok","Error","statusText","data","json","error","console","mint","getLeaderBoard"],"sources":["/home/nick/Desktop/Monagaynanimas_Neynar/src/game/utils.ts"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\n\nexport const getOrCreatePlayerId = (): string => {\n  let id = localStorage.getItem('playerId');\n  if (!id) {\n    id = uuidv4();\n    localStorage.setItem('playerId', id);\n  }\n  return id;\n};\n\nexport const playSound = (src: string, isSoundOn: boolean, audioPool: HTMLAudioElement[]) => {\n  if (!isSoundOn) return audioPool;\n  \n  const audio = new Audio(src);\n  audio.volume = 0.05;\n  audioPool.push(audio); \n  audio.play();\n\n  audio.onended = () => {\n    audioPool = audioPool.filter(a => a !== audio);\n  };\n\n  return audioPool;\n};\n\nexport const playRandomSound = (\n  sounds,\n  category: keyof typeof sounds,\n  isSoundOn: boolean,\n  audioPool: HTMLAudioElement[]\n) => {\n  if (!isSoundOn || !sounds || !sounds[category] || sounds[category].length === 0) return audioPool;\n\n  const randomIndex = Math.floor(Math.random() * sounds[category].length);\n  const audio = sounds[category][randomIndex];\n\n  audio.volume = 0.3;\n  audioPool.push(audio);\n  audio.play();\n\n  audio.onended = () => {\n    audioPool = audioPool.filter(a => a !== audio);\n  };\n\n  return audioPool;\n};\n\nexport const loadSounds = async () => {\n  const soundLibrary: { [key: string]: HTMLAudioElement[] } = {\n    kill: [],\n    death: [],\n    hit: [],\n    shoot: []\n  };\n\n  for (let i = 1; i <= 9; i++) {\n    soundLibrary.kill.push(new Audio(`/sound/kill/kill${i}.mp3`));\n  }\n\n  for (let i = 1; i <= 7; i++) {\n    soundLibrary.death.push(new Audio(`/sound/death/death${i}.mp3`));\n  }\n\n  for (let i = 1; i <= 2; i++) {\n    soundLibrary.hit.push(new Audio(`/sound/hit/hit${i}.mp3`));\n  }\n\n  soundLibrary.shoot.push(new Audio(`/sound/shoot/shooooot.mp3`));\n  soundLibrary.shoot.push(new Audio(`/sound/shoot/shooooot1.mp3`));\n  soundLibrary.shoot.push(new Audio(`/sound/shoot/heal.mp3`));\n\n  return soundLibrary;\n};\n\nexport const sendTransaction = async (score, isDead = false) => {\n  try {\n    const playerId = getOrCreatePlayerId();\n\n    const reqData = {\n      id: playerId,\n      score: `${score}`,\n      isDead: isDead\n    };    \n\n    const response = await fetch(\"https://gameapi.monadassistant.xyz/set_score\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(reqData) as any\n    });\n\n    if (!response.ok) {\n      throw new Error(`Err: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(\"Err:\", error);\n  }\n};\n\nexport const mint = async () => {\n  try {\n\n    const playerId = getOrCreatePlayerId();\n    const reqData = { id: playerId };\n\n    const response = await fetch(\"https://gameapi.monadassistant.xyz/mint\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(reqData)\n    });\n\n    if ( !response.ok ) {\n      throw new Error(`Error mint: ${response.statusText}` );\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(\"Err:\", error);\n  }\n}\n\nexport const getLeaderBoard = async () => {\n  const response = await fetch(\"https://gameapi.monadassistant.xyz/get_top_10_scores\",\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n  );\n\n  if (!response.ok) {\n    throw new Error(`Error getting leaderboard: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  return data;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}