{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const FrameMultiplierContext=/*#__PURE__*/createContext(1);const measureFrameRate=()=>{return new Promise(resolve=>{let frames=0;const startTime=performance.now();const countFrames=()=>{frames++;if(performance.now()-startTime<1000){requestAnimationFrame(countFrames);}else{resolve(frames);}};requestAnimationFrame(countFrames);});};export const FrameMultiplierProvider=_ref=>{let{children}=_ref;const[frameMultiplier,setFrameMultiplier]=useState(1);useEffect(()=>{const calculateMultiplier=async()=>{//speeding up the game based on the refresh rate\nawait new Promise(res=>setTimeout(res,800));const refreshRate=await measureFrameRate();let multiplier=refreshRate>=65?1:1.5;setFrameMultiplier(multiplier);console.log(\"Refresh rate: \",refreshRate);console.log(\"Frame multiplier: \",multiplier);};calculateMultiplier();},[]);return/*#__PURE__*/_jsx(FrameMultiplierContext.Provider,{value:frameMultiplier,children:children});};export const useFrameMultiplier=()=>{return useContext(FrameMultiplierContext);};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","FrameMultiplierContext","measureFrameRate","Promise","resolve","frames","startTime","performance","now","countFrames","requestAnimationFrame","FrameMultiplierProvider","_ref","children","frameMultiplier","setFrameMultiplier","calculateMultiplier","res","setTimeout","refreshRate","multiplier","console","log","Provider","value","useFrameMultiplier"],"sources":["/home/nick/Desktop/Monagaynanimas_Neynar/src/providers/FrameMultiplierProvider.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nconst FrameMultiplierContext = createContext<number>(1);\r\n\r\nconst measureFrameRate = () => {\r\n  return new Promise<number>((resolve) => {\r\n    let frames = 0;\r\n    const startTime = performance.now();\r\n\r\n    const countFrames = () => {\r\n      frames++;\r\n      if (performance.now() - startTime < 1000) {\r\n        requestAnimationFrame(countFrames);\r\n      } else {\r\n        resolve(frames);\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(countFrames);\r\n  });\r\n};\r\n\r\nexport const FrameMultiplierProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [frameMultiplier, setFrameMultiplier] = useState<number>(1);\r\n\r\n  useEffect(() => {\r\n    const calculateMultiplier = async () => {\r\n      //speeding up the game based on the refresh rate\r\n      await new Promise((res) => setTimeout(res, 800));\r\n      const refreshRate = await measureFrameRate();\r\n      let multiplier = refreshRate >= 65 ? 1 : 1.5;\r\n      setFrameMultiplier(multiplier);\r\n      console.log(\"Refresh rate: \", refreshRate);\r\n      console.log(\"Frame multiplier: \", multiplier);\r\n    };\r\n\r\n    calculateMultiplier();\r\n  }, []);\r\n\r\n  return (\r\n    <FrameMultiplierContext.Provider value={frameMultiplier}>\r\n      {children}\r\n    </FrameMultiplierContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFrameMultiplier = () => {\r\n  return useContext(FrameMultiplierContext);\r\n};\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,sBAAsB,cAAGN,aAAa,CAAS,CAAC,CAAC,CAEvD,KAAM,CAAAO,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,MAAO,IAAI,CAAAC,OAAO,CAAUC,OAAO,EAAK,CACtC,GAAI,CAAAC,MAAM,CAAG,CAAC,CACd,KAAM,CAAAC,SAAS,CAAGC,WAAW,CAACC,GAAG,CAAC,CAAC,CAEnC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxBJ,MAAM,EAAE,CACR,GAAIE,WAAW,CAACC,GAAG,CAAC,CAAC,CAAGF,SAAS,CAAG,IAAI,CAAE,CACxCI,qBAAqB,CAACD,WAAW,CAAC,CACpC,CAAC,IAAM,CACLL,OAAO,CAACC,MAAM,CAAC,CACjB,CACF,CAAC,CAEDK,qBAAqB,CAACD,WAAW,CAAC,CACpC,CAAC,CAAC,CACJ,CAAC,CAED,MAAO,MAAM,CAAAE,uBAAgE,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC3F,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGjB,QAAQ,CAAS,CAAC,CAAC,CAEjED,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC;AACA,KAAM,IAAI,CAAAb,OAAO,CAAEc,GAAG,EAAKC,UAAU,CAACD,GAAG,CAAE,GAAG,CAAC,CAAC,CAChD,KAAM,CAAAE,WAAW,CAAG,KAAM,CAAAjB,gBAAgB,CAAC,CAAC,CAC5C,GAAI,CAAAkB,UAAU,CAAGD,WAAW,EAAI,EAAE,CAAG,CAAC,CAAG,GAAG,CAC5CJ,kBAAkB,CAACK,UAAU,CAAC,CAC9BC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEH,WAAW,CAAC,CAC1CE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEF,UAAU,CAAC,CAC/C,CAAC,CAEDJ,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEhB,IAAA,CAACC,sBAAsB,CAACsB,QAAQ,EAACC,KAAK,CAAEV,eAAgB,CAAAD,QAAA,CACrDA,QAAQ,CACsB,CAAC,CAEtC,CAAC,CAED,MAAO,MAAM,CAAAY,kBAAkB,CAAGA,CAAA,GAAM,CACtC,MAAO,CAAA7B,UAAU,CAACK,sBAAsB,CAAC,CAC3C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}