{"ast":null,"code":"import{CONFIG}from'../config.ts';export class Bullet{constructor(x,y,angle,speed,color,size,isPlayer,damage,type){this.x=void 0;this.y=void 0;this.vx=void 0;this.vy=void 0;this.spawnTime=void 0;this.bounces=void 0;this.speed=void 0;this.color=void 0;this.size=void 0;this.isPlayer=void 0;this.damage=void 0;this.type=void 0;this.lastUpdateTime=void 0;this.x=x;this.y=y;this.speed=speed;this.color=color;this.vx=Math.cos(angle)*this.speed;this.vy=Math.sin(angle)*this.speed;this.spawnTime=Date.now();this.bounces=0;this.size=size;this.isPlayer=isPlayer;this.damage=damage;this.type=type;this.lastUpdateTime=performance.now();}draw(ctx){if(this.type===\"fire\"){ctx.shadowBlur=10+Math.sin(performance.now()/100)*5;ctx.shadowColor=\"rgba(255, 100, 0, 0.8)\";const gradient=ctx.createRadialGradient(this.x,this.y,this.size*0.2,this.x,this.y,this.size);gradient.addColorStop(0,\"yellow\");gradient.addColorStop(0.5,\"orange\");gradient.addColorStop(1,\"red\");ctx.fillStyle=gradient;}else{ctx.fillStyle=this.color;}ctx.beginPath();ctx.arc(this.x,this.y,this.size+(this.type===\"fire\"?Math.sin(performance.now()/100)*2:0),0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;}update(){const now=performance.now();this.lastUpdateTime=now;const prevX=this.x;const prevY=this.y;this.x+=this.vx;this.y+=this.vy;this.checkWallCollision(prevX,prevY);}checkWallCollision(prevX,prevY){if(this.bounces>=CONFIG.MAX_BOUNCES)return;const nextCellX=Math.floor(this.x/CONFIG.CELL_SIZE);const nextCellY=Math.floor(this.y/CONFIG.CELL_SIZE);const prevCellX=Math.floor(prevX/CONFIG.CELL_SIZE);const prevCellY=Math.floor(prevY/CONFIG.CELL_SIZE);if(nextCellX<0||nextCellY<0||nextCellY>=CONFIG.MAP.length||nextCellX>=CONFIG.MAP[0].length){return;}if(CONFIG.MAP[nextCellY][nextCellX]===1){const hitVertical=nextCellX!==prevCellX;const hitHorizontal=nextCellY!==prevCellY;if(hitVertical)this.vx*=-1;if(hitHorizontal)this.vy*=-1;this.bounces++;this.x=prevX-this.vx;this.y=prevY-this.vy;}}get isExpired(){return Date.now()-this.spawnTime>CONFIG.BULLET_LIFETIME||this.bounces>CONFIG.MAX_BOUNCES;}}","map":{"version":3,"names":["CONFIG","Bullet","constructor","x","y","angle","speed","color","size","isPlayer","damage","type","vx","vy","spawnTime","bounces","lastUpdateTime","Math","cos","sin","Date","now","performance","draw","ctx","shadowBlur","shadowColor","gradient","createRadialGradient","addColorStop","fillStyle","beginPath","arc","PI","fill","update","prevX","prevY","checkWallCollision","MAX_BOUNCES","nextCellX","floor","CELL_SIZE","nextCellY","prevCellX","prevCellY","MAP","length","hitVertical","hitHorizontal","isExpired","BULLET_LIFETIME"],"sources":["/home/nick/Desktop/Monagaynanimas_Neynar/src/game/classes/Bullet.ts"],"sourcesContent":["import { CONFIG } from '../config.ts';\n\nexport class Bullet {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  spawnTime: number;\n  bounces: number;\n  speed: number;\n  color: string;\n  size: number; \n  isPlayer: boolean;\n  damage: number;\n  type: string;\n  lastUpdateTime: number;\n  \n  constructor(x: number, y: number, angle: number, speed: number, color: string, size: number, isPlayer: boolean, damage: number, type: string) {\n    this.x = x;\n    this.y = y;\n    this.speed = speed;\n    this.color = color;\n    this.vx = Math.cos(angle) * this.speed;\n    this.vy = Math.sin(angle) * this.speed;\n    this.spawnTime = Date.now();\n    this.bounces = 0;\n    this.size = size;\n    this.isPlayer = isPlayer; \n    this.damage = damage;\n    this.type = type;\n    this.lastUpdateTime = performance.now();\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    if (this.type === \"fire\") {\n        ctx.shadowBlur = 10 + Math.sin(performance.now() / 100) * 5;\n        ctx.shadowColor = \"rgba(255, 100, 0, 0.8)\";\n\n        const gradient = ctx.createRadialGradient(this.x, this.y, this.size * 0.2, this.x, this.y, this.size);\n        gradient.addColorStop(0, \"yellow\");\n        gradient.addColorStop(0.5, \"orange\");\n        gradient.addColorStop(1, \"red\");\n\n        ctx.fillStyle = gradient;\n    } else {\n        ctx.fillStyle = this.color;\n    }\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.size + (this.type === \"fire\" ? Math.sin(performance.now() / 100) * 2 : 0), 0, Math.PI * 2);\n    ctx.fill();\n\n    ctx.shadowBlur = 0;\n  }\n\n  update() {\n    const now = performance.now();\n    this.lastUpdateTime = now;\n    \n    const prevX = this.x;\n    const prevY = this.y;\n\n    this.x += this.vx;\n    this.y += this.vy;\n\n    this.checkWallCollision(prevX, prevY);\n  }\n\n  private checkWallCollision(prevX: number, prevY: number) {\n    if (this.bounces >= CONFIG.MAX_BOUNCES) return;\n\n    const nextCellX = Math.floor(this.x / CONFIG.CELL_SIZE);\n    const nextCellY = Math.floor(this.y / CONFIG.CELL_SIZE);\n    const prevCellX = Math.floor(prevX / CONFIG.CELL_SIZE);\n    const prevCellY = Math.floor(prevY / CONFIG.CELL_SIZE);\n\n    if (nextCellX < 0 || nextCellY < 0 || \n        nextCellY >= CONFIG.MAP.length || \n        nextCellX >= CONFIG.MAP[0].length) {\n      return;\n    }\n\n    if (CONFIG.MAP[nextCellY][nextCellX] === 1) {\n        const hitVertical = nextCellX !== prevCellX;\n        const hitHorizontal = nextCellY !== prevCellY;\n\n        if (hitVertical) this.vx *= -1;\n        if (hitHorizontal) this.vy *= -1;\n\n        this.bounces++;\n        this.x = prevX - this.vx;\n        this.y = prevY - this.vy;\n    }\n  }\n\n  get isExpired() {\n    return Date.now() - this.spawnTime > CONFIG.BULLET_LIFETIME || \n      this.bounces > CONFIG.MAX_BOUNCES;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}